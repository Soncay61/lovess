<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamWeb - Profesyonel Ã–nizleme</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <div id="startOverlay">
        <button class="start-btn" id="startBtn">SÃ¼rprizi BaÅŸlat â¤ï¸</button>
    </div>

    <div class="background-overlay"></div>

    <div class="container" id="mainCard">
        <div class="card" data-aos="zoom-in" data-aos-duration="1200">
            <div class="content">
                <div id="iconWrapper" class="ring-animation" data-aos="fade-down" data-aos-delay="400">
                    </div>
                
                <h1 class="title" id="mainTitle"></h1>
                <p class="subtitle" id="mainSubtitle"></p>
            </div>
            
            <div class="buttons" id="btnGroup">
                <button class="btnYes" id="yesButton">EVET</button>
                <button class="btnNo" id="noButton">HAYIR</button>
            </div>
        </div>
    </div> 

    <div class="gallery-container" id="galleryLayer" style="display: none;">
        <div class="box">
            <div class="dream" id="photoGallery"></div>
        </div>
    </div>
    
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script> AOS.init({ duration: 1000, once: true }); </script>

    <script>
        // --- DAKTÄ°LO EFEKTÄ° ---
        function typeWriter(elementId, text, speed, callback) {
            let i = 0;
            const element = document.getElementById(elementId);
            element.innerHTML = "";
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                } else {
                    if (callback) callback();
                }
            }
            type();
        }

        // SAYFA YÃœKLENÄ°NCE
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const type = urlParams.get('type'); 
            const isBirthday = (type === 'birthday');

            // --- AYARLAR ---
            const config = {
                title: isBirthday ? "Ä°yi Ki DoÄŸdun Prenses!" : "Benimle Evlenir Misin?",
                subtitle: isBirthday ? "Yeni yaÅŸÄ±n sana huzur ve mutluluk getirsin..." : "Ã–mrÃ¼mÃ¼n geri kalanÄ± olur musun?",
                yesMsg: isBirthday ? "Ä°yi Ki VarsÄ±n Sevgilim! ğŸ‰" : "Sonsuza kadar EVET! â¤ï¸",
                btnYesText: isBirthday ? "KUTLA ğŸ‰" : "EVET ğŸ’",
                btnNoText: isBirthday ? "HAYIR ğŸ‚" : "HAYIR ğŸ’”",
                emoji: isBirthday ? 'ğŸ‰' : 'â¤ï¸',
                // Ä°KON AYARLARI (Pastada Ã¶zel div, YÃ¼zÃ¼kte direkt resim)
                iconHtml: isBirthday ? 
                    `<div class="cake-wrapper">
                        <div class="flame"></div>
                        <img src="https://i.ibb.co/2Z7fVfM/cake-icon.png" class="cake-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/2682/2682431.png'">
                    </div>` : 
                    `<img src="https://pngimg.com/uploads/ring/ring_PNG26.png" class="ring-img">`
            };

            // HTML Elementlerini TanÄ±mla
            const mainTitle = document.getElementById('mainTitle');
            const mainSubtitle = document.getElementById('mainSubtitle');
            const iconWrapper = document.getElementById('iconWrapper');
            const yesButton = document.getElementById('yesButton');
            const noButton = document.getElementById('noButton');
            const photoGallery = document.getElementById('photoGallery');
            const card = document.querySelector('.card');

            // Ä°konu ve ButonlarÄ± YerleÅŸtir
            iconWrapper.innerHTML = config.iconHtml;
            yesButton.innerHTML = config.btnYesText;
            noButton.innerHTML = config.btnNoText;
            
            // EÄŸer DoÄŸum GÃ¼nÃ¼ ise dÄ±ÅŸtaki ring-animation class'Ä±nÄ± kaldÄ±r (Ã‡ift animasyon olmasÄ±n)
            if(isBirthday) {
                iconWrapper.classList.remove('ring-animation');
            } else {
                iconWrapper.classList.add('ring-animation');
            }

            // Galeriyi Doldur
            for (let i = 1; i <= 8; i++) {
                const span = document.createElement('span');
                span.style.setProperty('--i', i);
                const img = document.createElement('img');
                img.src = `https://picsum.photos/400/600?random=${i + (isBirthday ? 20 : 80)}`;
                span.appendChild(img);
                photoGallery.appendChild(span);
            }

            // --- GÄ°RÄ°Å EKRANI & MÃœZÄ°K BAÅLATMA ---
            document.getElementById('startBtn').addEventListener('click', () => {
                // Burada demo olduÄŸu iÃ§in ses dosyasÄ± Ã§alma simÃ¼lasyonu yapÄ±lÄ±r
                // const audio = new Audio('music.mp3'); audio.play();

                const overlay = document.getElementById('startOverlay');
                overlay.style.opacity = '0';
                setTimeout(() => overlay.style.display = 'none', 1000);

                // BaÅŸlÄ±klarÄ± Daktilo Efektiyle YazdÄ±r
                typeWriter("mainTitle", config.title, 90, () => {
                    typeWriter("mainSubtitle", config.subtitle, 50, () => {
                        document.getElementById('btnGroup').style.opacity = '1';
                    });
                });
            });

            // --- TROLL BUTON & FÄ°NAL ---
            let escapeCount = 0;
            const noTexts = isBirthday ? 
                ["Emin misin?", "Pasta eridi!", "Yapma be!", "Hadi Ã¼fle!", "Tamam pes :)"] : 
                ["Emin misin?", "Bir daha dÃ¼ÅŸÃ¼n?", "Son kararÄ±n mÄ±?", "KÄ±rma kalbimi...", "BasamazsÄ±n ki :)"];

            function moveButton() {
                if (escapeCount < 5) {
                    noButton.innerText = noTexts[escapeCount];
                    const rect = card.getBoundingClientRect();
                    const x = Math.max(10, Math.random() * (rect.width - 120));
                    const y = Math.max(10, Math.random() * (rect.height - 50));
                    noButton.style.position = 'absolute';
                    noButton.style.left = x + 'px';
                    noButton.style.top = y + 'px';
                    escapeCount++;
                } else {
                    noButton.style.display = 'none';
                    mainTitle.innerText = isBirthday ? "PastayÄ± Ã¼fle artÄ±k! ğŸ‚" : "Naz yapma prenses! ğŸ˜‰";
                }
            }

            noButton.addEventListener('mouseover', moveButton);
            noButton.addEventListener('touchstart', (e) => { e.preventDefault(); moveButton(); });

            // Evet Butonu
            yesButton.addEventListener('click', () => {
                mainTitle.innerText = config.yesMsg;
                mainSubtitle.textContent = isBirthday ? "Mutlu YÄ±llar..." : 'Seninle bir Ã¶mÃ¼r boyu...';
                document.getElementById('btnGroup').style.display = 'none';
                
                startConfetti(config.emoji);

                setTimeout(() => {
                    document.getElementById('mainCard').style.opacity = "0";
                    const galleryCont = document.getElementById('galleryLayer');
                    galleryCont.style.display = 'flex'; 
                    setTimeout(() => { 
                        galleryCont.style.opacity = "1"; 
                        document.getElementById('mainCard').style.display = "none"; 
                    }, 500);
                }, 3000);
            });

            function startConfetti(char) { 
                for(let i=0; i<80; i++) {
                    setTimeout(() => { 
                        const h = document.createElement('div'); 
                        h.className='heart'; 
                        h.innerHTML= Math.random() > 0.5 ? char : 'âœ¨'; 
                        h.style.left = Math.random() * 100 + 'vw';
                        const duration = Math.random() * 3 + 2; 
                        h.style.animationDuration = duration + 's';
                        h.style.fontSize = Math.random() * 20 + 20 + 'px';
                        document.body.appendChild(h); 
                        setTimeout(() => h.remove(), duration * 1000);
                    }, i * 80); 
                } 
            }
        });
    </script>
</body>
</html>
